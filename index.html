<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<title>Breakout HUD â€” A2 TwinRowï¼ˆæŒ‰éµä¸Šç§» / æç¤ºå¡ä¸‰å¼µï¼‰</title>
<style>
:root{
  --safe-top: env(safe-area-inset-top);
  --hudBottom: 96px; /* ç”± JS ä»¥ HUD åº•ç·£å‹•æ…‹æ›´æ–° */
  --ink: #eaf2ff; --muted:#b8c7ea;
  --glass-1: rgba(255,255,255,.08);
  --glass-2: rgba(255,255,255,.06);
  --stroke: rgba(140,180,255,.28);
  --bg:#0a142c;
}
html,body{height:100%;margin:0;color:var(--ink);
  background: radial-gradient(140% 140% at 50% -12%, #13224a 0%, #0e1a3a 50%, #081022 100%);
  font-family: ui-sans-serif, -apple-system, system-ui, "Segoe UI", Roboto, "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", Arial, sans-serif;
  -webkit-font-smoothing: antialiased;}
.wrap{max-width:1200px;margin:0 auto;padding:0 12px 24px}
header{padding:calc(8px + var(--safe-top)) 0 6px;display:flex;gap:8px;align-items:center;flex-wrap:wrap;justify-content:space-between}
h1{font-size:clamp(16px,2.6vw,22px);margin:0 8px 0 0;letter-spacing:.4px;opacity:.95}
.small{font-size:12px;color:var(--muted)}
select,button,input[type="range"]{background:var(--glass-2);border:1px solid var(--stroke);color:#fff;border-radius:10px}

/* === HUDï¼ˆA2ï¼šå…©åˆ—ï¼Œé€™ç‰ˆæŠŠä¸‰é¡†åœ“éˆ•ä¸Šç§»åˆ°ç¬¬ä¸€åˆ—å³å´ï¼‰ === */
.theme-a2 .hud{position:relative;z-index:20;display:grid;gap:8px;align-items:center;
  grid-template-columns:1fr auto; /* ç”±åŸä¸€æ¬„æ”¹ç‚ºã€Œå·¦çµ±è¨ˆã€å³æŒ‰éµã€ */
  max-width:min(1080px,96vw);margin:8px auto 0;border:1px solid var(--stroke);
  border-radius:18px;padding:10px;background:linear-gradient(180deg,rgba(20,25,44,.62),rgba(12,20,42,.44))}
.theme-a2 .stats{display:grid;grid-template-columns:auto auto;grid-auto-rows:minmax(34px,auto);gap:8px 10px}
.theme-a2 .stats .wide{grid-column:1 / -1}
.pill{padding:6px 11px;border:1px solid var(--stroke);background:var(--glass-2);border-radius:999px;min-height:34px;display:flex;align-items:center;gap:8px;color:#d7e3ff;font-weight:650;font-size:14px}
.pill b{color:#fff;font-variant-numeric:tabular-nums}
.hearts{letter-spacing:2px;margin-left:4px}
.controls{display:flex;gap:8px;align-items:center;justify-content:flex-end;align-self:start}
.ring{--size:42px;width:var(--size);height:var(--size);border-radius:999px;border:1px solid var(--stroke);
      background:radial-gradient(120% 120% at 30% 20%, rgba(255,255,255,.16), rgba(255,255,255,0) 58%), var(--glass-1);
      display:grid;place-items:center;cursor:pointer;box-shadow:inset 0 0 0 1px rgba(255,255,255,.05), 0 10px 24px rgba(0,0,0,.34)}
.ring:active{transform:translateY(1px)}
.bars{width:14px;height:16px;display:grid;grid-template-columns:1fr 1fr;gap:4px}
.bars span{background:#fff;border-radius:2px}
.menu{position:absolute;top:56px;right:0;min-width:280px;padding:10px;border:1px solid var(--stroke);border-radius:14px;background:rgba(12,18,36,.96);backdrop-filter:blur(10px);transform:scale(.96);opacity:0;pointer-events:none;transition:.16s ease;z-index:60}
.menu.show{transform:scale(1);opacity:1;pointer-events:auto}
.menu .item{display:flex;align-items:center;gap:10px;padding:10px;border:1px solid var(--stroke);border-radius:10px;background:var(--glass-2);margin-bottom:8px}
.menu h4{margin:6px 0 8px;font-size:13px;color:#cfe0ff}
.btn{padding:8px 12px;border-radius:10px;border:1px solid var(--stroke);cursor:pointer;background:var(--glass-2);color:#fff}

/* æ¥µçª„å¯¬åº¦æ™‚ç¸®æ’æ¯”ä¾‹ */
@media (max-width:390px){
  .pill{font-size:13px;padding:5px 10px}
  .ring{--size:40px}
}

/* === æ•ˆæœå€’æ•¸ï¼ˆHUD èˆ‡éŠæˆ²å€ä¹‹é–“ï¼‰ === */
#buffs{position:sticky;z-index:18;top:calc(var(--hudBottom) + 6px);display:flex;gap:8px;align-items:center;max-width:min(1080px,96vw);margin:6px auto 0;padding-left:6px;overflow:auto;scrollbar-width:none}
#buffs::-webkit-scrollbar{display:none}
.chip{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border:1px solid var(--stroke);border-radius:999px;background:var(--glass-1);font-size:12px;white-space:nowrap;color:#cfe0ff}
.chip b{color:#fff}

/* === éŠæˆ²èˆå° === */
.stage{position:relative;margin:12px auto 0;max-width:min(1080px,96vw);border-radius:18px;padding:12px}
.board{position:relative;height:min(62vh,560px);border-radius:16px;border:1px solid rgba(80,110,170,.45);background:linear-gradient(180deg,#0d132a,#0b1226 55%, #091223);box-shadow:inset 0 0 160px rgba(255,255,255,.03), 0 28px 90px rgba(0,0,0,.46)}
.boardOverlay{position:absolute;inset:0;pointer-events:none}

/* === æç¤ºå¡ï¼šä¸Šç§»ä¸”å¯æ©«æ”¾ä¸‰å¼µ === */
.prompts{position:absolute;left:10px;right:10px;top:44%;
  display:flex;gap:16px;align-items:flex-start;justify-content:flex-start;pointer-events:none;flex-wrap:nowrap}
.prompt{pointer-events:auto;padding:10px 12px;border:1px solid var(--stroke);border-radius:12px;background:rgba(14,22,40,.92);box-shadow:0 14px 36px rgba(0,0,0,.38);
  width:calc((100% - 32px)/3); font-size:12px; line-height:1.45; white-space:normal}
@media (max-width:480px){
  .prompts{flex-wrap:wrap}
  .prompt{width:calc((100% - 16px)/2)}
}
</style>
</head>
<body>
<div class="wrap theme-a2" id="app">
  <header>
    <h1>Breakout HUD æ¨£å“ï¼ˆA2 TwinRow æ”¹æ¬¾ï¼‰</h1>
    <span class="small">è¦æ ¼ï¼šStart/Stop ç„¡å­é¸å–®ï¼›éŸ³æ•ˆ/é¸é …å±•é–‹å³åœï¼Œé»ç©ºç™½é—œé–‰ä¸¦çºŒç©ï¼›æ•ˆæœå€’æ•¸æ–¼ HUD èˆ‡éŠæˆ²å€ä¹‹é–“ï¼›æç¤ºå¡ä½æ–¼ç£šå¡Šèˆ‡å¹³å°é–“ã€‚</span>
  </header>

  <!-- HUD -->
  <section class="hud">
    <div class="stats">
      <div class="pill">åˆ†æ•¸ <b data-bind="score">1,280</b></div>
      <div class="pill">é—œå¡ <b data-bind="level">3</b>/20</div>
      <div class="pill wide">ç”Ÿå‘½ <b data-bind="lives">3</b> <span class="hearts">â¤ï¸â¤ï¸â¤ï¸</span></div>
    </div>
    <div class="controls" style="position:relative">
      <button class="ring" data-as="start" aria-label="é–‹å§‹/æš«åœ"><span class="bars"><span></span><span></span></span></button>
      <button class="ring" data-as="sound" aria-haspopup="true" aria-expanded="false">ğŸ”Š</button>
      <div class="menu" data-as="soundMenu">
        <div class="item"><span>ğŸµ</span><label><input type="checkbox" checked> BGM é–‹é—œ</label></div>
        <div class="item"><span>ğŸš</span><label style="width:100%">BGM éŸ³é‡ <input type="range" min="0" max="1" step="0.01" value="0.7" style="width:60%"></label></div>
        <div class="item"><span>ğŸ”ˆ</span><label><input type="checkbox" checked> éŸ³æ•ˆé–‹é—œ</label></div>
      </div>
      <button class="ring" data-as="opt" aria-haspopup="true" aria-expanded="false">â‹¯</button>
      <div class="menu" data-as="optMenu">
        <h4>éŠæˆ²</h4>
        <div class="item"><span>ğŸ®</span>é›£åº¦ <select><option>ç°¡å–®</option><option selected>ä¸€èˆ¬</option><option>å›°é›£</option></select></div>
        <div class="row"><button class="btn">é‡æ–°é–‹å§‹</button><button class="btn">å­˜æª”</button><button class="btn">è®€æª”</button></div>
        <h4>å…¶ä»–</h4>
        <div class="row"><button class="btn">å…¨è¢å¹•</button><button class="btn">æ•™å­¸</button><button class="btn">æ•ˆæœèªªæ˜</button><button class="btn">ç•«å»Š</button><button class="btn">æ’è¡Œæ¦œ</button></div>
        <div class="item"><span>ğŸ¨</span>Skin <select><option>ä¾éŠæˆ²å…§ç‚ºæº–</option></select></div>
      </div>
    </div>
  </section>
  <div class="hud-sentinel" style="height:0"></div>

  <!-- æ•ˆæœå€’æ•¸ -->
  <div id="buffs" aria-live="polite">
    <span class="chip">ğŸ§² <b>8.2</b>s</span>
    <span class="chip">â„ï¸ <b>11.7</b>s</span>
    <span class="chip">ğŸ¯ <b>4.9</b>s</span>
  </div>

  <!-- éŠæˆ²èˆå°ï¼ˆç¤ºæ„ï¼‰ -->
  <div class="stage">
    <div class="board">
      <div class="boardOverlay">
        <div class="prompts" id="prompts">
          <div class="prompt">å‡çµçƒï¼šå¹³å°çŸ­æš«åœæ»¯ï¼Œç¯€å¥æ›´å¥½æŒæ¡ã€‚</div>
          <div class="prompt">é»æ»¯çƒï¼šç¢°å¹³å°æœƒå¸é™„ï¼Œé‡‹æ”¾å†æ“Šã€‚</div>
          <div class="prompt">é›·å°„ï¼šé–‹ç«æ¸…é™¤åŒåˆ—æ•¸å¡Šã€‚</div>
        </div>
      </div>
    </div>
  </div>

</div>

<script>
(function(){
  const app = document.getElementById('app');
  const hud = app.querySelector('.hud');
  const sentinel = app.querySelector('.hud-sentinel');
  const menus = app.querySelectorAll('.menu');
  let running = true, rafId = 0, ro=null;

  function start(){ running = true; document.body.classList.remove('stopped'); }
  function stop(){ running = false; document.body.classList.add('stopped'); }

  function queuePlace(){
    if(rafId) cancelAnimationFrame(rafId);
    rafId = requestAnimationFrame(placeHud);
  }
  function placeHud(){
    rafId=0;
    const rect = (sentinel||hud).getBoundingClientRect();
    const top = Math.max(0, Math.ceil(rect.top)) + 6;
    document.documentElement.style.setProperty('--hudBottom', top + 'px');
  }

  function toggleMenu(menu, btn){
    const show = !menu.classList.contains('show');
    closeMenus();
    if(show){ menu.classList.add('show'); btn?.setAttribute('aria-expanded','true'); stop(); }
    else { btn?.setAttribute('aria-expanded','false'); start(); }
    queuePlace();
  }
  function closeMenus(){
    menus.forEach(m=>m.classList.remove('show'));
    start(); queuePlace();
  }

  // wire
  hud.querySelector('[data-as="start"]').addEventListener('click', ()=>{ running?stop():start(); });
  const soundBtn = hud.querySelector('[data-as="sound"]');
  const optBtn = hud.querySelector('[data-as="opt"]');
  const soundMenu = hud.querySelector('[data-as="soundMenu"]');
  const optMenu = hud.querySelector('[data-as="optMenu"]');
  soundBtn.addEventListener('click', (e)=>{ e.stopPropagation(); toggleMenu(soundMenu, soundBtn); });
  optBtn.addEventListener('click', (e)=>{ e.stopPropagation(); toggleMenu(optMenu, optBtn); });
  document.addEventListener('click', (e)=>{ if(!e.target.closest('.menu') && !e.target.closest('[data-as="sound"]') && !e.target.closest('[data-as="opt"]')) closeMenus(); });

  // observe
  if(window.ResizeObserver){ ro = new ResizeObserver(queuePlace); ro.observe(hud); }
  ['resize','orientationchange','scroll'].forEach(ev=>window.addEventListener(ev, queuePlace, {passive:true}));
  if(window.visualViewport){ ['resize','scroll'].forEach(ev=>visualViewport.addEventListener(ev, queuePlace)); }
  if(document.fonts && document.fonts.ready){ document.fonts.ready.then(queuePlace); }
  queuePlace();
})();
</script>
</body>
</html>
