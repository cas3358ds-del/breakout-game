<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Rock Breakout â€“ Skin ç‰ˆæœ¬</title>
  <!--
    æ­¤æª”æ¡ˆæ•´åˆäº† index.html çš„éŠæˆ²åŠŸèƒ½èˆ‡ index_skin.html çš„å¤–è§€ã€‚ç‚ºäº†ä¿æŒéŠæˆ²åŠŸèƒ½å®Œæ•´ï¼Œ
    å…§éƒ¨æœƒåœ¨è¼‰å…¥å¾Œå‹•æ…‹æ“·å–åŸå§‹ index.html ä¸­çš„ç¨‹å¼ç¢¼ä¸¦åŸ·è¡Œã€‚UI æ¡ç”¨ index_skin çš„çµæ§‹
    åŠè¨­è¨ˆè®Šæ•¸ï¼Œä¸å†è¼‰å…¥ index_skin åŸæœ¬çš„ Canvas ç‰¹æ•ˆè…³æœ¬ï¼Œå› æ­¤åªå‘ˆç¾ UI éƒ¨åˆ†ã€‚
  -->
  <style>
    /* ------ åŸºæœ¬æ’ç‰ˆï¼ˆå–è‡ª index_skinï¼‰ ------ */
    :root{
      /* åŸºç¤è‰²å½©å®šç¾©ï¼ˆçµåˆ index_skin èˆ‡ index çš„è®Šæ•¸ï¼‰
         ç‚ºäº†è®“éŠæˆ²å…§çš„ç£šå¡Šã€çƒèˆ‡çˆ†ç‚¸æ­£å¸¸è‘—è‰²ï¼Œå¿…é ˆå®£å‘Š index.html ä¸­ä½¿ç”¨çš„é¡è‰²è®Šæ•¸ã€‚ */
      --ink:#eaf2ff;
      --muted:#b8c7ea;
      --glass-1:rgba(255,255,255,.08);
      --glass-2:rgba(255,255,255,.06);
      --stroke:rgba(140,180,255,.28);
      --bg1:#13224a;
      --bg2:#081022;
      --hudGrad1:rgba(20,25,44,.62);
      --hudGrad2:rgba(12,20,42,.44);
      --stageGlass:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0));
      --panelPattern:none;
      --btnGlow:0 0 0 rgba(0,0,0,0);
      --hudBottom:96px;
      --heartGlow: rgba(0,0,0,0);

      /* ä¸‹é¢é€™ä¸€çµ„æ˜¯å¾åŸç‰ˆ index.html è¤‡è£½éä¾†çš„é¡è‰²è®Šæ•¸ï¼Œä¾›éŠæˆ²è…³æœ¬ä½¿ç”¨ã€‚è‹¥ä¸å®£å‘Šï¼Œç£šå¡Šç­‰æœƒå› ç‚ºå–å€¼å¤±æ•—è€Œå‘ˆé»‘è‰²è€Œç„¡æ³•çœ‹è¦‹ã€‚ */
      --bg:#0b1022;
      --bg2:#0a0f1e;
      --fg:#e9ecf1;
      --accent:#66b2ff;
      --brick1:#ff6b6b;
      --brick2:#ffd166;
      --brick3:#06d6a0;
      --brick4:#4cc9f0;
      --expl:#ff8c00;
      --power:#7aa2ff;
      --debuff:#ff6aa3;
      --glass: rgba(255,255,255,.06);
      --glass-stroke: rgba(255,255,255,.12);
      --btn:#1a2448;
      --btn-stroke:#2a3974;
      --pill:#121a36;
      --led:#8fb3ff;
    }
    html,body{
      height:100%;margin:0;color:var(--ink);
      background: radial-gradient(140% 140% at 50% -12%, var(--bg1) 0%, #0e1a3a 50%, #0b1633 75%, var(--bg2) 100%);
      font-family: ui-sans-serif, -apple-system, system-ui, "Segoe UI", Roboto, "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
    }
    .wrap{max-width:1200px;margin:0 auto;padding:0 12px 24px}
    header{padding:calc(8px + env(safe-area-inset-top)) 0 10px;display:flex;gap:8px;align-items:center;flex-wrap:wrap;justify-content:space-between}
    h1{font-size:clamp(16px,2.6vw,22px);margin:0 8px 0 0;letter-spacing:.4px;opacity:.95}
    .small{font-size:12px;color:var(--muted)}
    /* HUD */
    .hud{position:sticky;top:0;z-index:30;display:grid;gap:8px;align-items:center;
      grid-template-columns:1fr;max-width:min(1080px,96vw);margin:8px auto 0;border:1px solid var(--stroke);
      border-radius:18px;padding:10px;background:linear-gradient(180deg,var(--hudGrad1),var(--hudGrad2));
      backdrop-filter: blur(8px);box-shadow:0 6px 28px rgba(0,0,0,.28)}
    .stats{display:grid;grid-template-columns:auto auto 1fr;grid-auto-rows:minmax(36px,auto);gap:8px 10px;align-items:center}
    .stats .wide{grid-column:1 / -1}
    .pill{padding:8px 18px;border:1px solid var(--stroke);background:var(--glass-2);border-radius:999px;min-height:36px;display:flex;align-items:center;gap:10px;color:#d7e3ff;font-weight:650;font-size:15px}
    .pill b{color:#fff;font-variant-numeric:tabular-nums}
    .inline-controls{justify-self:end;display:flex;gap:8px;align-items:center;position:relative}
    .ic-btn{width:48px;height:36px;border-radius:12px;border:1px solid var(--stroke);
      background:radial-gradient(120% 120% at 30% 20%, rgba(255,255,255,.16), rgba(255,255,255,0) 58%), var(--glass-1);
      display:grid;place-items:center;cursor:pointer;box-shadow:inset 0 0 0 1px rgba(255,255,255,.05), 0 8px 20px rgba(0,0,0,.28), var(--btnGlow); color:#fff}
    .ic-btn:active{transform:translateY(1px)}
    .ic-btn .ico{font-size:18px;line-height:1}
    .menu{position:absolute;top:46px;right:0;min-width:280px;padding:10px;border:1px solid var(--stroke);border-radius:14px;background:rgba(12,18,36,.96);backdrop-filter:blur(10px);transform:scale(.96);opacity:0;pointer-events:none;transition:.16s ease;z-index:60}
    .menu.show{transform:scale(1);opacity:1;pointer-events:auto}
    .menu .item{display:flex;align-items:center;gap:10px;padding:10px;border:1px solid var(--stroke);border-radius:10px;background:var(--glass-2);margin-bottom:8px}
    .menu h4{margin:6px 0 8px;font-size:13px;color:#cfe0ff}
    .btn{padding:8px 12px;border-radius:10px;border:1px solid var(--stroke);cursor:pointer;background:var(--glass-2);color:#fff;box-shadow:var(--btnGlow)}
    /* Buffs and prompts */
    #buffs{position:sticky;z-index:22;top:calc(var(--hudBottom) + 6px);display:flex;gap:8px;align-items:center;max-width:min(1080px,96vw);margin:6px auto 0;padding-left:6px;overflow:auto;scrollbar-width:none}
    #buffs::-webkit-scrollbar{display:none}
    .chip{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border:1px solid var(--stroke);border-radius:999px;background:var(--glass-1);font-size:12px;white-space:nowrap;color:#cfe0ff}
    #promptsDock{position:sticky;z-index:20;top:calc(var(--hudBottom) + 48px);max-width:min(1080px,96vw);margin:6px auto 0;padding:0 6px;display:flex;gap:8px;align-items:flex-start;overflow:auto;scrollbar-width:none}
    #promptsDock::-webkit-scrollbar{display:none}
    .prompt{padding:8px 10px;border:1px solid var(--stroke);border-radius:12px;background:rgba(14,22,40,.92);box-shadow:0 10px 26px rgba(0,0,0,.34);font-size:12px;line-height:1.45;color:#eaf2ff;white-space:nowrap}
    .stage{position:relative;margin:12px auto 0;max-width:min(1080px,96vw);border-radius:18px;padding:12px;box-sizing:border-box;background:var(--stageGlass);background-image:var(--panelPattern);background-blend-mode:overlay;}
    canvas#game{
      background:linear-gradient(180deg,#0d132a,#0b1226 55%, #091223);
      border:1px solid rgba(80,110,170,.45);
      border-radius:16px;
      display:block;
      width:100%;
      height:auto;
      margin:0 auto;
      box-shadow:inset 0 0 160px rgba(255,255,255,.03), 0 28px 90px rgba(0,0,0,.46);
      /* å¢åŠ äº®åº¦å’Œå°æ¯”ï¼Œä½¿éŠæˆ²åœ–åƒæ›´æ¸…æ™°å¯è¦‹ */
      filter:brightness(1.4) contrast(1.3) saturate(1.2);
    }
    .legend{display:flex;gap:8px;flex-wrap:wrap;align-items:center;justify-content:center;font-size:12px;color:#cfe0ff;margin-top:6px}
    .legend .item{padding:4px 8px;border-radius:10px;background:rgba(255,255,255,.05);border:1px solid var(--stroke)}
    .legend .box{width:14px;height:14px;display:inline-block;border-radius:3px;margin-right:4px;vertical-align:middle}
    /* Overlay elements (ç°¡åŒ–ç‰ˆ) */
    .overlay{position:relative;}
    .gallery,.win,.gameover,.center-note{
      position:fixed;top:0;left:0;width:100%;height:100%;display:none;align-items:center;justify-content:center;z-index:100;background:rgba(0,0,0,0.75);
    }
    .gallery img{max-width:90%;max-height:90%;border-radius:12px;box-shadow:0 0 40px rgba(0,0,0,0.5);}
    .gallery.show{display:flex;}
    .win.show{display:flex;}
    .gameover.show{display:flex;}
    .win .center,.gameover .center{
      background:#0a1733;padding:20px;border-radius:16px;color:#fff;max-width:90%;text-align:center;box-shadow:0 10px 40px rgba(0,0,0,0.5);
    }
    .note-box{background:#08102a;padding:16px 18px;border-radius:14px;color:#d7dcff;text-align:center;max-width:90%;box-shadow:0 8px 40px rgba(0,0,0,0.5);font-size:14px;}
    .note-box h2{margin:0 0 8px;font-size:18px;color:#fff;}
    .note-box p{margin:6px 0;line-height:1.6}
    .note-close{position:absolute;top:4px;right:6px;width:28px;height:28px;border-radius:50%;background:rgba(255,255,255,0.1);color:#fff;border:none;cursor:pointer;font-weight:bold;display:flex;align-items:center;justify-content:center;}
    .note-close:hover{background:rgba(255,255,255,0.2);}
    /* Hearts icons styling */
    .hearts{margin-left:8px;}

    /* ------ Skin é¡è‰²è®Šé«”ï¼ˆç”± index_skin æŠ½å‡ºï¼‰ ------ */
    /* æ—¢æœ‰ Skinsï¼ˆéœ“è™¹/ç§‘æŠ€/å®‡å®™/æœ¨ç´‹/å†°é›ªï¼‰ */
    body[data-skin="éœ“è™¹ï¼é­…å½±å¹»å½©"]{ --ink:#f6fbff; --muted:#dbe6ff; --stroke:rgba(200,220,255,.38); --bg1:#0b0f2a; --bg2:#070a18; --hudGrad1:rgba(24,28,70,.58); --hudGrad2:rgba(16,22,58,.42); --glass-1:rgba(255,255,255,.12); --glass-2:rgba(255,255,255,.09); --stageGlass:linear-gradient(180deg, rgba(255,255,255,.03), rgba(0,0,0,0)); --panelPattern:conic-gradient(from 0deg at 60% 40%, rgba(255,160,220,.08), rgba(160,220,255,.06), rgba(160,255,200,.06), rgba(255,220,160,.06), rgba(255,160,220,.08)); --btnGlow:0 0 20px rgba(160,220,255,.25);}    
    body[data-skin="ç§‘æŠ€ï¼è³½åšæ ¼ç¶ "]{ --ink:#e7ffe7; --muted:#bdfdcc; --stroke:rgba(120,255,170,.34); --bg1:#081812; --bg2:#03110a; --hudGrad1:rgba(10,40,26,.64); --hudGrad2:rgba(6,28,18,.46); --glass-1:rgba(160,255,200,.12); --glass-2:rgba(120,220,170,.08); --stageGlass:linear-gradient(180deg, rgba(120,255,180,.05), rgba(0,0,0,0)); --panelPattern:repeating-linear-gradient(180deg, rgba(140,255,190,.05) 0 1px, transparent 1px 3px); --btnGlow:0 0 16px rgba(120,255,170,.25);}    
    body[data-skin="å®‡å®™ï¼æ˜Ÿè¾°çµ®èª"]{ --ink:#eef0ff; --muted:#c9c9ff; --stroke:rgba(160,140,255,.34); --bg1:#0c0b24; --bg2:#09081a; --hudGrad1:rgba(30,24,70,.58); --hudGrad2:rgba(20,18,50,.44); --glass-1:rgba(200,180,255,.10); --glass-2:rgba(160,140,255,.08); --stageGlass:linear-gradient(180deg, rgba(160,140,255,.05), rgba(0,0,0,0)); --panelPattern:radial-gradient(120px 80px at 20% 10%, rgba(110,80,255,.08), transparent 60%), radial-gradient(160px 120px at 80% 20%, rgba(180,100,255,.08), transparent 60%); --btnGlow:0 0 22px rgba(150,120,255,.25);}    
    body[data-skin="æœ¨ç´‹ï¼é»‘æª€æ›œé‡‘"]{ --ink:#f6edd8; --muted:#d9caa8; --stroke:rgba(255,220,140,.28); --bg1:#0e0b09; --bg2:#060403; --hudGrad1:rgba(28,18,10,.72); --hudGrad2:rgba(18,12,8,.56); --glass-1:rgba(255,220,140,.10); --glass-2:rgba(255,220,140,.07); --stageGlass:linear-gradient(180deg, rgba(255,220,140,.04), rgba(0,0,0,0)); --panelPattern:repeating-linear-gradient(12deg, rgba(40,28,18,.35) 0 18px, rgba(0,0,0,0) 18px 34px), repeating-linear-gradient(192deg, rgba(60,44,28,.20) 0 12px, rgba(0,0,0,0) 12px 28px); --btnGlow:0 0 20px rgba(255,210,120,.24);}    
    body[data-skin="æœ¨ç´‹ï¼ç™½æ©¡åŒ—æ­"]{ --ink:#fff8ec; --muted:#e6d8c2; --stroke:rgba(255,215,170,.26); --bg1:#3a2d19; --bg2:#1c150b; --hudGrad1:rgba(78,60,30,.66); --hudGrad2:rgba(48,36,18,.50); --glass-1:rgba(255,220,170,.10); --glass-2:rgba(255,220,170,.08); --stageGlass:linear-gradient(180deg, rgba(255,230,190,.05), rgba(0,0,0,0)); --panelPattern:repeating-linear-gradient(8deg, rgba(210,170,120,.14) 0 14px, rgba(0,0,0,0) 14px 26px), repeating-linear-gradient(188deg, rgba(240,210,160,.05) 0 2px, rgba(0,0,0,0) 2px 8px); --btnGlow:0 0 16px rgba(255,220,170,.22);}    
    body[data-skin="å†°é›ªï¼æ¥µå…‰çµ²ç¶¢"]{ --ink:#f6fbff; --muted:#d7e9ff; --stroke:rgba(190,220,255,.38); --bg1:#0b1626; --bg2:#060b14; --hudGrad1:rgba(18,28,60,.56); --hudGrad2:rgba(10,20,44,.42); --glass-1:rgba(220,245,255,.12); --glass-2:rgba(210,235,255,.09); --stageGlass:linear-gradient(180deg, rgba(230,245,255,.04), transparent); --panelPattern:conic-gradient(from 0deg at 60% 40%, rgba(180,220,255,.06), rgba(160,210,255,.05), rgba(180,230,255,.06)); --btnGlow:0 0 20px rgba(180,220,255,.26);}    
    
    /* é¨å£«ï¼ç™½éŠ€åŠå…‰ */
    body[data-skin="é¨å£«ï¼ç™½éŠ€åŠå…‰"]{
      --ink:#eef4ff; --muted:#cfd9ec;
      --stroke:rgba(190,205,235,.34);
      --bg1:#0D0D0F; --bg2:#0A0A0C;
      --hudGrad1:rgba(22,26,36,.66); --hudGrad2:rgba(14,18,26,.52);
      --glass-1:rgba(255,255,255,.10); --glass-2:rgba(255,255,255,.07);
      --stageGlass:linear-gradient(180deg, rgba(255,255,255,.03), rgba(0,0,0,0));
      --panelPattern:
        repeating-linear-gradient(90deg, rgba(220,230,245,.06) 0 2px, rgba(0,0,0,0) 2px 8px),
        radial-gradient(160px 100px at 72% 14%, rgba(176,196,222,.06), transparent 60%);
      --btnGlow:0 0 20px rgba(200,220,255,.18);
      --heartGlow:rgba(210,230,255,.85);
    }
    /* çƒˆç„°ï¼æ˜Ÿç«é¢¨æš´ */
    body[data-skin="çƒˆç„°ï¼æ˜Ÿç«é¢¨æš´"]{
      --ink:#fff3ec; --muted:#ffd0b8; --stroke:rgba(255,160,120,.30);
      --bg1:#150807; --bg2:#080404;
      --hudGrad1:rgba(40,16,12,.68); --hudGrad2:rgba(22,10,8,.52);
      --glass-1:rgba(255,150,100,.12); --glass-2:rgba(255,130,90,.08);
      --stageGlass:linear-gradient(180deg, rgba(255,140,90,.04), rgba(0,0,0,0));
      --panelPattern:radial-gradient(120px 90px at 30% 20%, rgba(255,120,90,.06), transparent 60%);
      --btnGlow:0 0 22px rgba(255,150,100,.28);
      --heartGlow:rgba(255,120,60,.9);
    }
    @keyframes fireFlicker{ 0%{filter:brightness(1);} 50%{filter:brightness(1.08);} 100%{filter:brightness(1);} }
    @keyframes emberBorder{ 0%{ box-shadow:0 0 0 rgba(0,0,0,0), 0 0 28px rgba(255,130,80,.25);} 50%{ box-shadow:0 0 0 rgba(0,0,0,0), 0 0 38px rgba(255,160,110,.34);} 100%{ box-shadow:0 0 0 rgba(0,0,0,0), 0 0 28px rgba(255,130,80,.25);} }
    body[data-skin="çƒˆç„°ï¼æ˜Ÿç«é¢¨æš´"] .ic-btn,
    body[data-skin="çƒˆç„°ï¼æ˜Ÿç«é¢¨æš´"] .btn{
      background:
        conic-gradient(from 120deg at 80% 10%, rgba(255,220,180,.12), rgba(255,160,100,.12) 40%, rgba(255,120,80,.08) 60%, rgba(255,220,180,.12)),
        radial-gradient(120% 120% at 30% 20%, rgba(255,255,255,.18), rgba(255,255,255,0) 58%),
        var(--glass-1);
      border-color: rgba(255,150,110,.45);
      animation: fireFlicker 1.2s ease-in-out infinite alternate;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06), 0 8px 22px rgba(0,0,0,.28), 0 0 32px rgba(255,140,90,.25);
    }
    body[data-skin="çƒˆç„°ï¼æ˜Ÿç«é¢¨æš´"] .hud{
      animation: emberBorder 2.6s ease-in-out infinite;
      border-color: rgba(255,150,110,.35);
    }
    /* é­”æ³•ï¼é‡‘è€€æ—¥è• */
    body[data-skin="é­”æ³•ï¼é‡‘è€€æ—¥è•"]{
      --ink:#FFF6E6; --muted:#EED9B6;
      --stroke:rgba(255,210,120,.30);
      --bg1:#0E0C08; --bg2:#0A0906;
      --hudGrad1:rgba(34,26,12,.72); --hudGrad2:rgba(22,16,8,.58);
      --glass-1:rgba(255,228,168,.10); --glass-2:rgba(184,133,46,.08);
      --stageGlass:linear-gradient(180deg, rgba(255,228,168,.045), rgba(0,0,0,0));
      --panelPattern: radial-gradient(160px 100px at 70% 18%, rgba(255,210,120,.06), transparent 60%),
                      radial-gradient(220px 160px at 18% 6%, rgba(184,133,46,.05), transparent 60%);
      --btnGlow:0 0 22px rgba(255,210,120,.22);
      --heartGlow:rgba(255,210,120,.88);
    }
    @keyframes goldBreath{0%{filter:brightness(1)}50%{filter:brightness(1.08)}100%{filter:brightness(1)}}
    body[data-skin="é­”æ³•ï¼é‡‘è€€æ—¥è•"] .ic-btn,
    body[data-skin="é­”æ³•ï¼é‡‘è€€æ—¥è•"] .btn{
      background:
        linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,0) 42%),
        repeating-linear-gradient(90deg, rgba(255,255,255,.06) 0 2px, rgba(0,0,0,0) 2px 6px),
        radial-gradient(120% 120% at 30% 20%, rgba(255,255,255,.16), rgba(255,255,255,0) 58%),
        var(--glass-1);
      border-color: rgba(255,210,120,.50);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06), 0 8px 22px rgba(0,0,0,.28), 0 0 32px rgba(255,210,120,.18);
      animation: goldBreath 3.5s ease-in-out infinite;
    }
    body[data-skin="é­”æ³•ï¼é‡‘è€€æ—¥è•"] .ic-btn:active,
    body[data-skin="é­”æ³•ï¼é‡‘è€€æ—¥è•"] .btn:active{
      transform: translateY(1px);
      box-shadow: inset 0 1px 0 rgba(0,0,0,.35), 0 6px 18px rgba(0,0,0,.24);
      filter: brightness(1.08);
    }
    /* å…”å…”ï¼å¥¶æ²¹é›²æœµ */
    body[data-skin="å…”å…”ï¼å¥¶æ²¹é›²æœµ"]{
      --ink:#FFF9FB; --muted:#F7DDE6;
      --stroke:rgba(255,200,180,.28);
      --bg1:#1a1218; --bg2:#0b0a10;
      --hudGrad1:rgba(255,240,246,.18); --hudGrad2:rgba(255,255,255,.10);
      --glass-1:rgba(255,255,255,.18); --glass-2:rgba(255,255,255,.12);
      --stageGlass:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,0));
      --panelPattern:none;
      --btnGlow:0 0 20px rgba(255,190,220,.18);
      --heartGlow:rgba(255,182,193,.85);
    }
    body[data-skin="å…”å…”ï¼å¥¶æ²¹é›²æœµ"] .hud{ border-radius:20px; box-shadow:0 10px 34px rgba(255,190,220,.18), 0 2px 0 rgba(255,255,255,.04) inset; }
    body[data-skin="å…”å…”ï¼å¥¶æ²¹é›²æœµ"] .hearts .life-icon, body[data-skin="å…”å…”ï¼å¥¶æ²¹é›²æœµ"] .hearts .life-icon svg{width:24px;height:24px}
    body[data-skin="å…”å…”ï¼å¥¶æ²¹é›²æœµ"] .hearts.compact .life-icon, body[data-skin="å…”å…”ï¼å¥¶æ²¹é›²æœµ"] .hearts.compact .life-icon svg{width:21px;height:21px}
    @media (max-width:360px){ body[data-skin="å…”å…”ï¼å¥¶æ²¹é›²æœµ"] .hearts .life-icon, body[data-skin="å…”å…”ï¼å¥¶æ²¹é›²æœµ"] .hearts .life-icon svg{width:22px;height:22px} }
    body[data-skin="å…”å…”ï¼å¥¶æ²¹é›²æœµ"] .ic-btn,
    body[data-skin="å…”å…”ï¼å¥¶æ²¹é›²æœµ"] .btn{
      background:
        linear-gradient(180deg, rgba(255,255,255,.22), rgba(255,255,255,0) 46%),
        radial-gradient(90% 120% at 30% 18%, rgba(255,244,234,.36), rgba(255,244,234,0) 60%),
        var(--glass-1);
      border-color: rgba(255,210,230,.45);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06), 0 8px 22px rgba(0,0,0,.22), 0 0 24px rgba(255,200,220,.20);
      transition: filter .2s ease;
    }
    body[data-skin="å…”å…”ï¼å¥¶æ²¹é›²æœµ"] .ic-btn:active,
    body[data-skin="å…”å…”ï¼å¥¶æ²¹é›²æœµ"] .btn:active{ filter: brightness(1.06); transform: translateY(1px); }
    /* é­”ç‹ï¼çµ‚ç„‰å¯‚æ»… */
    body[data-skin="é­”ç‹ï¼çµ‚ç„‰å¯‚æ»…"]{
      --ink:#C0C0C0; --muted:#9aa3ad; --stroke:#363636;
      --hudGrad1:rgba(14,14,14,.82); --hudGrad2:rgba(10,10,10,.66);
      --glass-1:rgba(192,192,192,.08); --glass-2:rgba(120,120,120,.06);
      --stageGlass:linear-gradient(180deg, rgba(14,14,14,.85), rgba(10,10,10,.65));
      --panelPattern:
        repeating-linear-gradient(125deg, rgba(255,255,255,0.04) 0 2px, rgba(0,0,0,0) 2px 10px),
        repeating-linear-gradient(305deg, rgba(255,140,0,0.035) 0 3px, rgba(0,0,0,0) 3px 14px);
      --heartGlow:rgba(255,120,80,.25);
    }
    body[data-skin="æœ¨ç´‹ï¼ç™½æ©¡åŒ—æ­"]{
      /* refinement for oak skin */
      --panelPattern:
        linear-gradient(180deg, rgba(245,232,209,.16), rgba(227,210,182,.12)),
        repeating-linear-gradient(10deg, rgba(120,90,50,.22) 0 5px, rgba(0,0,0,0) 5px 16px),
        repeating-linear-gradient(90deg, rgba(255,242,220,.06) 0 1px, rgba(0,0,0,0) 1px 10px);
      --stageGlass: linear-gradient(180deg, rgba(255,245,230,.10), rgba(255,245,230,.00));
      --btnGlow: 0 0 16px rgba(255, 225, 180, .22);
      --heartGlow: rgba(255, 220, 170, .18);
    }
  </style>
</head>
<body data-skin="ç¶“å…¸é¢¨æ ¼">
  <div class="wrap" id="app">
    <header>
      <h1>Rockæ‰“ç£šå¡Š â€” <span id="skinTitle">ç¶“å…¸é¢¨æ ¼</span></h1>
      <!-- åˆªé™¤çš®è†šèªªæ˜æ–‡å­—ï¼Œåƒ…ä¿ç•™å®¹å™¨ä»¥ç¶­æŒçµæ§‹ -->
      <span class="small" id="skinDesc"></span>
    </header>

    <!-- HUD -->
    <section class="hud" aria-label="éŠæˆ² HUD">
      <div class="stats">
        <div class="pill">åˆ†æ•¸ <b id="score">0</b></div>
        <!-- é—œå¡é¡¯ç¤ºï¼šscript æœƒæ›´æ–° #level å…§å®¹ç‚ºã€Œç›®å‰/ç¸½æ•¸ã€ã€‚é€™è£¡åˆå§‹é¡¯ç¤º 1/20ã€‚ -->
        <div class="pill">é—œå¡ <b id="level">1/20</b></div>
        <div class="inline-controls">
          <button class="ic-btn" id="sndBtn" aria-haspopup="true" aria-expanded="false" aria-controls="soundMenu" title="è²éŸ³"><span class="ico">ğŸ”Š</span></button>
          <div class="menu" id="soundMenu">
            <div class="item"><span>ğŸµ</span><label><input type="checkbox" id="bgmOn"> BGM é–‹é—œ</label></div>
            <div class="item"><span>ğŸš</span><label style="width:100%">BGM éŸ³é‡ <input id="bgmVol" type="range" min="0" max="1" step="0.01" value="0.7" style="width:60%" aria-label="BGM éŸ³é‡"></label></div>
            <div class="item"><span>ğŸ”ˆ</span><label><input type="checkbox" id="sfxOn" checked> éŸ³æ•ˆé–‹é—œ</label></div>
          </div>
          <button class="ic-btn" id="optBtn" aria-haspopup="true" aria-expanded="false" aria-controls="optMenu" title="é¸é …">â‹¯</button>
          <div class="menu" id="optMenu">
            <h4>éŠæˆ²</h4>
            <div class="item"><span>ğŸ®</span>é›£åº¦ <select id="difficulty" aria-label="é›£åº¦"><option>ç°¡å–®</option><option selected>ä¸€èˆ¬</option><option>å›°é›£</option></select></div>
            <div class="row" style="display:flex;gap:8px;flex-wrap:wrap"><button class="btn" id="resetBtn">é‡æ–°é–‹å§‹</button><button class="btn" id="saveBtn">å­˜æª”</button><button class="btn" id="loadBtn">è®€æª”</button></div>
            <h4>å…¶ä»–</h4>
            <div class="row" style="display:flex;gap:8px;flex-wrap:wrap"><button class="btn" id="fsBtn">å…¨è¢å¹•</button><button class="btn" id="tutorBtn">æ•™å­¸</button><button class="btn" id="effectsBtn">æ•ˆæœèªªæ˜</button><button class="btn" id="galleryBtn">ç•«å»Š</button><button class="btn" id="rankBtn">æ’è¡Œæ¦œ</button></div>
            <div class="item"><span>ğŸ¨</span>Skin <select aria-label="Skin" id="skinSel">
              <option>ç¶“å…¸é¢¨æ ¼</option>
              <option>éœ“è™¹ï¼é­…å½±å¹»å½©</option>
              <option>ç§‘æŠ€ï¼è³½åšæ ¼ç¶ </option>
              <option>å®‡å®™ï¼æ˜Ÿè¾°çµ®èª</option>
              <option>æœ¨ç´‹ï¼é»‘æª€æ›œé‡‘</option>
              <option>æœ¨ç´‹ï¼ç™½æ©¡åŒ—æ­</option>
              <option>å†°é›ªï¼æ¥µå…‰çµ²ç¶¢</option>
              <option>é¨å£«ï¼ç™½éŠ€åŠå…‰</option>
              <option>çƒˆç„°ï¼æ˜Ÿç«é¢¨æš´</option>
              <option>é­”æ³•ï¼é‡‘è€€æ—¥è•</option>
              <option>å…”å…”ï¼å¥¶æ²¹é›²æœµ</option>
              <option>é­”ç‹ï¼çµ‚ç„‰å¯‚æ»…</option>
            </select></div>
          </div>
        </div>
        <div class="pill wide">ç”Ÿå‘½ <b id="lives">3</b> <span class="hearts" id="hearts" aria-hidden="true">â¤ï¸â¤ï¸â¤ï¸</span></div>
      </div>
    </section>
    <div class="hud-sentinel" style="height:0"></div>

    <!-- Buffs / prompts docks -->
    <div id="buffs" aria-live="polite"></div>
    <div id="promptsDock" aria-live="polite" aria-label="æç¤ºå¡"></div>

    <!-- éŠæˆ²å€ -->
    <div class="stage">
      <canvas id="game" width="1100" height="700" aria-label="éŠæˆ²ç•«é¢"></canvas>
      <div class="legend">
        <span class="item"><span class="box" style="background:#ffd166"></span>ä¸€èˆ¬ç£š</span>
        <span class="item"><span class="box" style="background:#888"></span>ä¸å¯ç ´å£ç£š</span>
        <span class="item"><span class="box" style="background:#bb7aff"></span>å¼·åå½ˆç£š</span>
        <span class="item"><span class="box" style="background:#6ec6ff"></span>ç§»å‹•ç£š</span>
      </div>
    </div>

    <!-- éŠæˆ²ç”¨ overlayï¼›åŒ…å«ç•«å»Šã€å‹åˆ©èˆ‡çµæŸç•«é¢ã€ä¸­å¿ƒæç¤º -->
    <div class="overlay">
      <div class="gallery" id="gallery">
        <div class="backdrop"></div>
        <img alt="é—œå¡å¤§åœ–" id="galleryImg" src="" />
        <div class="hint">é»ä¸€ä¸‹é€²å…¥ä¸‹ä¸€é—œ â–¶</div>
      </div>
      <div class="win" id="win">
        <div class="backdrop"></div>
        <div class="thumb-ring" id="ring"></div>
        <div class="center">
          <h2>æ­å–œéé—œï¼</h2>
          <div style="font-size:28px;margin:6px 0;">ç¸½åˆ†æ•¸ï¼š<span id="finalScore">0</span></div>
          <div id="statsWin" style="text-align:left;font-size:13px;line-height:1.7;margin:6px auto 2px;max-width:360px"></div>
          <div class="small">ä½œè€…ï¼š ChatGPTã€€ï¼ã€€æŒ‡å°è€…ï¼š Rock</div>
          <div class="again"><button class="btn" id="againBtn">å†ç©ä¸€æ¬¡</button></div>
        </div>
      </div>
      <div id="prompts" class="prompts"></div>
      <div class="gameover" id="gameover">
        <div class="backdrop"></div>
        <div class="center">
          <h2>éŠæˆ²çµæŸ</h2>
          <div style="font-size:28px;margin:6px 0;">æœ€çµ‚åˆ†æ•¸ï¼š<span id="finalScore2">0</span></div>
          <div id="statsOver" style="text-align:left;font-size:13px;line-height:1.7;margin:6px auto 2px;max-width:320px"></div>
          <div class="again"><button class="btn" id="retryBtn">å†æ¬¡éŠæˆ²</button></div>
        </div>
      </div>
      <div class="center-note" id="centerNote">
        <div class="note-box" id="noteBox">
          <button aria-label="é—œé–‰" class="note-close" id="noteClose">Ã—</button>
          <h2 id="noteTitle">æŒ‰ <kbd>Space</kbd> æˆ–é»ç•«é¢é–‹å§‹</h2>
          <p id="noteText">æ“ä½œï¼š<kbd>â†</kbd>/<kbd>â†’</kbd> æˆ– <kbd>A</kbd>/<kbd>D</kbd>ï¼›æ‰‹æŒ‡æ‹–æ›³ç•«é¢ä¹Ÿå¯ç§»å‹•å¹³å°ã€‚</p>
        </div>
      </div>
    </div>

    <!-- éš±è—åŸéŠæˆ²æ§åˆ¶å…ƒä»¶ï¼Œæä¾›éŠæˆ²è…³æœ¬ç¶å®šç”¨ -->
    <button id="pauseBtn" style="display:none;"></button>
    <button id="soundBtn" style="display:none;"></button>
    <button id="bgmBtn" style="display:none;"></button>
    <button id="clearSaveBtn" style="display:none;"></button>
    <select id="ledStyle" style="display:none;">
      <option value="classic" selected>ç¶“å…¸é¢¨æ ¼</option>
      <option value="tech">ç§‘æŠ€é¢¨æ ¼</option>
      <option value="arc">é›»å¼§é¢¨æ ¼</option>
    </select>
    <!-- active buffs container -->
    <div id="activeBuffs" class="badges"></div>
  </div>

  <!-- éŸ¿æ‡‰å¼é¸å–®æ§åˆ¶ï¼ˆå–è‡ª index_skinï¼‰ -->
  <script>
    (function(){
      const hud = document.querySelector('.hud');
      const sentinel = document.querySelector('.hud-sentinel');
      const sndBtn = document.getElementById('sndBtn');
      const optBtn = document.getElementById('optBtn');
      const soundMenu = document.getElementById('soundMenu');
      const optMenu = document.getElementById('optMenu');
      let scheduled=false;
      function schedule(){ if(scheduled) return; scheduled=true; requestAnimationFrame(()=>{ scheduled=false; placeHUD(); }); }
      function placeHUD(){ const rect = (sentinel||hud).getBoundingClientRect(); const top = Math.max(0, Math.ceil(rect.top)) + 6; document.documentElement.style.setProperty('--hudBottom', top + 'px'); }
      function toggle(menu, btn){ const show = !menu.classList.contains('show'); [soundMenu,optMenu].forEach(m=>m.classList.remove('show')); document.querySelectorAll('[aria-expanded="true"]').forEach(b=>b.setAttribute('aria-expanded','false')); if(show){ menu.classList.add('show'); btn.setAttribute('aria-expanded','true'); } schedule(); }
      sndBtn.addEventListener('click', (e)=>{ e.stopPropagation(); toggle(soundMenu, sndBtn); }, {passive:true});
      optBtn.addEventListener('click', (e)=>{ e.stopPropagation(); toggle(optMenu, optBtn); }, {passive:true});
      document.addEventListener('click', (e)=>{ if(!e.target.closest('.menu') && !e.target.closest('#optBtn') && !e.target.closest('#sndBtn')){ [soundMenu,optMenu].forEach(m=>m.classList.remove('show')); schedule(); } }, {passive:true});
      ['resize','orientationchange'].forEach(ev=>window.addEventListener(ev, schedule, {passive:true}));
      if(document.fonts && document.fonts.ready){ document.fonts.ready.then(schedule); }
      schedule();
    })();
  </script>

  <!-- éŠæˆ²æ ¸å¿ƒè¼‰å…¥èˆ‡ UI æ˜ å°„ -->
  <!-- è¼‰å…¥å£“ç¸®è§£å£“åº« pako ä»¥åŠéŠæˆ²è³‡æ–™ -->
  <!-- pako ç”¨ä¾†è§£å£“ç¸®å£“ç¸®å¾Œçš„éŠæˆ²ç¨‹å¼ç¢¼ -->
  <script src="node_modules/pako/dist/pako.min.js"></script>
  <!-- game_data.js å°‡ window.GAME_BASE64 è¨­å®šç‚ºå£“ç¸®å¾Œçš„éŠæˆ²ç¨‹å¼ç¢¼å­—ä¸² -->
  <script src="game_data.js"></script>
  <!-- éŠæˆ²æ ¸å¿ƒè¼‰å…¥èˆ‡ UI æ˜ å°„ -->
  <script>
  (function(){
    // é€é fetch è®€å–åŸå§‹ index.htmlï¼ŒæŠ½å–ä¸»è¦éŠæˆ²ç¨‹å¼ç¢¼ä¸¦åŸ·è¡Œã€‚
    // è§£å£“ç¸®ä¸¦è¼‰å…¥éŠæˆ²æ ¸å¿ƒç¨‹å¼ç¢¼ã€‚
    async function loadGameScript(){
      // ç¢ºèª pako å·²è¼‰å…¥
      if(typeof pako === 'undefined') throw new Error('pako æœªè¼‰å…¥');
      if(!window.GAME_BASE64) throw new Error('æœªæ‰¾åˆ°éŠæˆ²è³‡æ–™');
      // base64 å­—ä¸²è½‰ Uint8Array
      const binary = atob(window.GAME_BASE64);
      const len = binary.length;
      const bytes = new Uint8Array(len);
      for(let i=0;i<len;i++){ bytes[i] = binary.charCodeAt(i); }
      // è§£å£“ç¸®ç‚ºå­—ä¸²
      let code;
      try{
        code = pako.inflate(bytes, { to: 'string' });
      }catch(e){
        console.error('è§£å£“ç¸®éŠæˆ²è³‡æ–™å¤±æ•—', e);
        throw e;
      }
      try{
        // åŸ·è¡Œè§£å£“å¾Œçš„ç¨‹å¼ç¢¼æ–¼å…¨åŸŸä½œç”¨åŸŸï¼Œç¢ºä¿éŠæˆ²å‡½å¼æ›è¼‰åˆ° window
        // ä½¿ç”¨ new Function é¿å… eval åœ¨å±€éƒ¨ä½œç”¨åŸŸå®šç¾©è®Šæ•¸
        const globalExec = new Function(code);
        globalExec();
      }catch(e){
        console.error('åŸ·è¡ŒéŠæˆ²ç¨‹å¼ç¢¼å¤±æ•—', e);
        throw e;
      }
      return Promise.resolve();
    }
    // è¨­å®šé›£åº¦é¸å–®å€¼
    function initDifficulty(){
      const diff = document.getElementById('difficulty');
      if(diff && diff.options.length>=3){
        diff.options[0].value='easy';
        diff.options[1].value='normal';
        diff.options[2].value='hard';
      }
    }
    // ç”Ÿå‘½åœ–ç¤ºåŒæ­¥é¡¯ç¤º
    function initHearts(){
      const livesEl = document.getElementById('lives');
      const hearts = document.getElementById('hearts');
      if(livesEl && hearts){
        const updateHearts = () => {
          const n = parseInt(livesEl.textContent, 10) || 0;
          hearts.innerHTML = 'â¤ï¸'.repeat(Math.max(0,n));
        };
        updateHearts();
        new MutationObserver(updateHearts).observe(livesEl, { childList:true, characterData:true, subtree:true });
      }
    }
    // UI æ§ä»¶èˆ‡éŠæˆ²å‡½å¼æ˜ å°„
    function bindUI(){
      // é‡æ–°é–‹å§‹ï¼šç›´æ¥è§¸ç™¼åŸæœ¬çš„ resetBtnï¼ˆäº‹ä»¶å·²ç”±éŠæˆ²è…³æœ¬ç¶å®šï¼‰
      document.getElementById('resetBtn')?.addEventListener('click', ()=>{
        // nothing extra; event listener inéŠæˆ²è…³æœ¬æœƒè™•ç†é‡é–‹
      });
      // é›£åº¦åˆ‡æ›ï¼šè§¸ç™¼é‡é–‹æŒ‰éˆ•ä¾†è®“éŠæˆ²é‡æ–°åˆå§‹åŒ–
      document.getElementById('difficulty')?.addEventListener('change', ()=>{
        document.getElementById('resetBtn')?.click();
      });
      // éŸ³æ•ˆé–‹é—œï¼šé€éè§¸ç™¼éš±è—çš„ soundBtn ä¾†åˆ‡æ›éŸ³æ•ˆ
      document.getElementById('sfxOn')?.addEventListener('change', function(){
        document.getElementById('soundBtn')?.click();
      });
      // BGM é–‹é—œï¼šé€éè§¸ç™¼éš±è—çš„ bgmBtn ä¾†åˆ‡æ› BGM
      document.getElementById('bgmOn')?.addEventListener('change', function(){
        document.getElementById('bgmBtn')?.click();
      });
      // çš®è†šåˆ‡æ›ï¼šæ›´æ–° body çš„ data-skinï¼›CSS æœƒè‡ªå‹•æ‡‰ç”¨
      document.getElementById('skinSel')?.addEventListener('change', function(){
        document.body.dataset.skin = this.value.trim();
        document.getElementById('skinTitle').textContent = this.value.trim();
      });
    }
    // ç§»é™¤çš®è†šæè¿°
    const sd = document.getElementById('skinDesc'); if(sd) sd.textContent = '';
    // ç°¡æ˜“é™¤éŒ¯å‡½å¼ï¼šå°‡è³‡è¨Šé¡¯ç¤ºåœ¨ä¸­å¿ƒæç¤ºæ¡†
    function debugMessage(msg){
      const noteBox = document.getElementById('noteBox');
      const noteTitle = document.getElementById('noteTitle');
      const noteText = document.getElementById('noteText');
      const centerNote = document.getElementById('centerNote');
      if(noteBox && noteTitle && noteText && centerNote){
        noteTitle.textContent = 'è¨Šæ¯';
        noteText.innerHTML = msg;
        centerNote.style.display = 'flex';
      }
    }
    // åˆå§‹ä¸é¡¯ç¤ºé™¤éŒ¯è¨Šæ¯ï¼›å¦‚æœè¼‰å…¥éŠæˆ²è…³æœ¬å¤±æ•—æ™‚æ‰é¡¯ç¤º
    // åˆå§‹åŒ–
    initDifficulty();
    initHearts();
    // è¼‰å…¥éŠæˆ²è…³æœ¬å¾Œç¶å®š UIã€‚è‹¥è¼‰å…¥å¤±æ•—äº¦ç¢ºä¿ UI æ§ä»¶å¯æ“ä½œï¼Œä»¥ä¾¿åµéŒ¯ã€‚
    loadGameScript().then(() => {
      // éŠæˆ²æ ¸å¿ƒè¼‰å…¥å®Œæˆå¾Œç¶å®š UI
      bindUI();
      // ä¸è‡ªå‹•å•Ÿå‹•éŠæˆ²ï¼Œè®“ç©å®¶è‡ªè¡Œé»æ“Šæˆ–æŒ‰ Space é–‹å§‹ï¼›éŠæˆ²è…³æœ¬æœƒè™•ç†å•Ÿå‹•é‚è¼¯
    }).catch((err) => {
      console.error('è¼‰å…¥éŠæˆ²è…³æœ¬å¤±æ•—', err);
      bindUI();
      if(typeof debugMessage==='function') debugMessage('è…³æœ¬è¼‰å…¥å¤±æ•—: '+ (err && err.message ? err.message : err));
    });
  })();
  </script>
</body>
</html>